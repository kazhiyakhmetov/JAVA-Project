<!--<!DOCTYPE html>-->
<!--<html xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <title>Главная страница</title>-->
<!--    <style>-->
<!--        body {-->
<!--            font-family: Arial, sans-serif;-->
<!--            background-color: #f9f9f9;-->
<!--            margin: 0;-->
<!--            padding: 0;-->
<!--        }-->
<!--        h1 {-->
<!--            text-align: center;-->
<!--            margin-top: 20px;-->
<!--            color: #333;-->
<!--        }-->
<!--        h2 {-->
<!--            text-align: center;-->
<!--            margin-top: 20px;-->
<!--            color: #333;-->
<!--        }-->
<!--        table {-->
<!--            width: 80%;-->
<!--            margin: 20px auto;-->
<!--            border-collapse: collapse;-->
<!--            background: white;-->
<!--            border-radius: 8px;-->
<!--            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);-->
<!--        }-->
<!--        th, td {-->
<!--            padding: 12px;-->
<!--            border: 1px solid #ddd;-->
<!--            text-align: left;-->
<!--        }-->
<!--        th {-->
<!--            background-color: #1a73e8;-->
<!--            color: white;-->
<!--        }-->
<!--        td {-->
<!--            background-color: #f4f4f4;-->
<!--        }-->
<!--        button {-->
<!--            padding: 8px 12px;-->
<!--            background-color: #1a73e8;-->
<!--            color: white;-->
<!--            border: none;-->
<!--            cursor: pointer;-->
<!--            border-radius: 4px;-->
<!--            font-size: 16px;-->
<!--        }-->
<!--        button:hover {-->
<!--            background-color: #1558b0;-->
<!--        }-->
<!--        a {-->
<!--            display: inline-block;-->
<!--            text-align: center;-->
<!--            text-decoration: none;-->
<!--            color: #1a73e8;-->
<!--            font-size: 16px;-->
<!--            margin: 5px 0;-->
<!--        }-->
<!--        a:hover {-->
<!--            text-decoration: underline;-->
<!--        }-->
<!--        .task-title {-->
<!--            color: #1a73e8;-->
<!--            font-weight: bold;-->
<!--        }-->
<!--        .task-title:hover {-->
<!--            text-decoration: underline;-->
<!--        }-->
<!--        .add-task-btn {-->
<!--            display: block;-->
<!--            margin: 20px auto;-->
<!--            padding: 10px 20px;-->
<!--            background-color: #1a73e8;-->
<!--            color: white;-->
<!--            border-radius: 5px;-->
<!--            text-align: center;-->
<!--            font-size: 18px;-->
<!--        }-->
<!--        .add-task-btn:hover {-->
<!--            background-color: #1558b0;-->
<!--        }-->
<!--        .pagination {-->
<!--            display: flex;-->
<!--            justify-content: center;-->
<!--            list-style: none;-->
<!--            padding: 0;-->
<!--        }-->
<!--        .pagination li {-->
<!--            margin: 0 5px;-->
<!--        }-->
<!--        .pagination a, .pagination span {-->
<!--            display: inline-block;-->
<!--            padding: 10px 15px;-->
<!--            border: 1px solid #ddd;-->
<!--            color: #007bff;-->
<!--            text-decoration: none;-->
<!--            border-radius: 0;-->
<!--            font-size: 14px;-->
<!--            transition: all 0.3s;-->
<!--        }-->
<!--        .pagination a:hover {-->
<!--            background-color: #f0f0f0;-->
<!--        }-->
<!--        .active-page span {-->
<!--            color: #007bff;-->
<!--            font-weight: bold;-->
<!--            cursor: default;-->
<!--            border: 1px solid #007bff;-->
<!--        }-->
<!--    </style>-->
<!--    <script>-->
<!--        let idleTime = 0;-->

<!--        function timerIncrement() {-->
<!--            idleTime++;-->
<!--            if (idleTime > 15) {-->
<!--                window.location.href = '/auth/login';-->
<!--            }-->
<!--        }-->
<!--        function resetTimer() {-->
<!--            idleTime = 0;-->
<!--        }-->
<!--        window.onload = function() {-->
<!--            setInterval(timerIncrement, 1000);-->
<!--            document.onmousemove = resetTimer;-->
<!--            document.onkeypress = resetTimer;-->
<!--            document.onclick = resetTimer;-->
<!--        }-->
<!--    </script>-->
<!--</head>-->
<!--<body>-->
<!--<h2><a href="/profile" class="profile-button">Профиль</a></h2>-->

<!--<h1>Мои задачи</h1>-->

<!--&lt;!&ndash; Форма для поиска и фильтрации &ndash;&gt;-->
<!--<form th:action="@{/home}" method="get" style="text-align: center; margin-bottom: 20px;">-->
<!--    &lt;!&ndash; Поле для поиска &ndash;&gt;-->
<!--    <input type="text" name="query" placeholder="Введите название задачи"-->
<!--           style="padding: 10px; width: 50%; font-size: 16px; border-radius: 4px; border: 1px solid #ccc;"-->
<!--           th:value="${query}" />-->

<!--    &lt;!&ndash; Фильтрация по категориям &ndash;&gt;-->
<!--    <select name="category" style="padding: 10px; font-size: 16px; border-radius: 4px; border: 1px solid #ccc;">-->
<!--        <option value="" th:selected="${category == null}">Все категории</option>-->
<!--        <option th:each="cat : ${categories}" th:value="${cat.name}" th:text="${cat.name}"-->
<!--                th:selected="${cat.name == category}"></option>-->
<!--    </select>-->

<!--    <button type="submit"-->
<!--            style="padding: 10px 20px; font-size: 16px; border: none; background-color: #007bff; color: white; cursor: pointer; border-radius: 4px;">-->
<!--        Применить-->
<!--    </button>-->
<!--</form>-->

<!--<a href="/task/new" class="add-task-btn">Добавить новую задачу</a>-->

<!--<table>-->
<!--    <thead>-->
<!--    <tr>-->
<!--        <th>Название</th>-->
<!--        <th>Категория</th>-->
<!--        <th>Действия</th>-->
<!--    </tr>-->
<!--    </thead>-->
<!--    <tbody>-->
<!--    <tr th:each="task : ${tasksPage.content}">-->
<!--        <td>-->
<!--            <a th:href="@{/task/{id}(id=${task.id})}" class="task-title" th:text="${task.title}"></a>-->
<!--        </td>-->
<!--        <td th:text="${task.category.name}"></td>-->
<!--        <td>-->
<!--            <a th:href="@{/task/delete/{id}(id=${task.id})}">Удалить</a>-->
<!--        </td>-->
<!--    </tr>-->
<!--    </tbody>-->
<!--</table>-->

<!--<div style="text-align: center;">-->
<!--    <ul class="pagination">-->
<!--        <li th:if="${tasksPage.number > 0}">-->
<!--            <a th:href="@{/home(page=${tasksPage.number - 1}, query=${query}, category=${category})}">Назад</a>-->
<!--        </li>-->
<!--        <li th:classappend="${tasksPage.number == 0} ? 'active-page'">-->
<!--            <span th:text="${tasksPage.number + 1}"></span>-->
<!--        </li>-->
<!--        <li th:if="${tasksPage.number < tasksPage.totalPages - 1}">-->
<!--            <a th:href="@{/home(page=${tasksPage.number + 1}, query=${query}, category=${category})}" th:text="${tasksPage.number + 2}"></a>-->
<!--        </li>-->
<!--        <li th:if="${tasksPage.number < tasksPage.totalPages - 1}">-->
<!--            <a th:href="@{/home(page=${tasksPage.number + 1}, query=${query}, category=${category})}">Вперёд</a>-->
<!--        </li>-->
<!--    </ul>-->
<!--</div>-->
<!--</body>-->
<!--</html>-->



<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Главная страница</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f9f9f9;
            margin: 0;
            padding: 0;
        }

        h1 {
            text-align: center;
            margin-top: 20px;
            color: #333;
        }

        h2 {
            text-align: center;
            margin-top: 20px;
            color: #333;
        }

        table {
            width: 80%;
            margin: 20px auto;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        th, td {
            padding: 12px;
            border: 1px solid #ddd;
            text-align: left;
        }

        th {
            background-color: #1a73e8;
            color: white;
        }

        td {
            background-color: #f4f4f4;
        }

        button {
            padding: 8px 12px;
            background-color: #1a73e8;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 4px;
            font-size: 16px;
        }

        button:hover {
            background-color: #1558b0;
        }

        a {
            display: inline-block;
            text-align: center;
            text-decoration: none;
            color: #1a73e8;
            font-size: 16px;
            margin: 5px 0;
        }

        a:hover {
            text-decoration: underline;
        }

        .task-title {
            color: #1a73e8;
            font-weight: bold;
        }

        .task-title:hover {
            text-decoration: underline;
        }

        .add-task-btn {
            display: block;
            margin: 20px auto;
            padding: 10px 20px;
            background-color: #1a73e8;
            color: white;
            border-radius: 5px;
            text-align: center;
            font-size: 18px;
        }

        .add-task-btn:hover {
            background-color: #1558b0;
        }

        .pagination {
            display: flex;
            justify-content: center;
            list-style: none;
            padding: 0;
        }

        .pagination li {
            margin: 0 5px;
        }

        .pagination a, .pagination span {
            display: inline-block;
            padding: 10px 15px;
            border: 1px solid #ddd;
            color: #007bff;
            text-decoration: none;
            border-radius: 0;
            font-size: 14px;
            transition: all 0.3s;
        }

        .pagination a:hover {
            background-color: #f0f0f0;
        }

        .active-page span {
            color: #007bff;
            font-weight: bold;
            cursor: default;
            border: 1px solid #007bff;
        }

        .container {
            max-width: 600px;
            margin: 20px auto;
            padding: 20px;
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .form-group input, .form-group textarea {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        .form-group button {
            padding: 10px 20px;
            background-color: #1a73e8;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }

        .form-group button:hover {
            background-color: #1558b0;
        }

        .message {
            margin-top: 20px;
            text-align: center;
        }

        .message p {
            font-size: 16px;
        }
    </style>
</head>
<body>
<h2><a href="/profile" class="profile-button">Профиль</a></h2>

<h1>Мои задачи</h1>

<!-- Форма для поиска и фильтрации -->
<form th:action="@{/home}" method="get" style="text-align: center; margin-bottom: 20px;">
    <!-- Поле для поиска -->
    <input type="text" name="query" placeholder="Введите название задачи"
           style="padding: 10px; width: 50%; font-size: 16px; border-radius: 4px; border: 1px solid #ccc;"
           th:value="${query}" />

    <!-- Фильтрация по категориям -->
    <select name="category" style="padding: 10px; font-size: 16px; border-radius: 4px; border: 1px solid #ccc;">
        <option value="" th:selected="${category == null}">Все категории</option>
        <option th:each="cat : ${categories}" th:value="${cat.name}" th:text="${cat.name}"
                th:selected="${cat.name == category}"></option>
    </select>

    <button type="submit"
            style="padding: 10px 20px; font-size: 16px; border: none; background-color: #007bff; color: white; cursor: pointer; border-radius: 4px;">
        Применить
    </button>
</form>

<a href="/task/new" class="add-task-btn">Добавить новую задачу</a>

<table>
    <thead>
    <tr>
        <th>Название</th>
        <th>Категория</th>
        <th>Действия</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="task : ${tasksPage.content}">
        <td>
            <a th:href="@{/task/{id}(id=${task.id})}" class="task-title" th:text="${task.title}"></a>
        </td>
        <td th:text="${task.category.name}"></td>
        <td>
            <a th:href="@{/task/delete/{id}(id=${task.id})}">Удалить</a>
        </td>
    </tr>
    </tbody>
</table>

<div style="text-align: center;">
    <ul class="pagination">
        <li th:if="${tasksPage.number > 0}">
            <a th:href="@{/home(page=${tasksPage.number - 1}, query=${query}, category=${category})}">Назад</a>
        </li>
        <li th:classappend="${tasksPage.number == 0} ? 'active-page'">
            <span th:text="${tasksPage.number + 1}"></span>
        </li>
        <li th:if="${tasksPage.number < tasksPage.totalPages - 1}">
            <a th:href="@{/home(page=${tasksPage.number + 1}, query=${query}, category=${category})}" th:text="${tasksPage.number + 2}"></a>
        </li>
        <li th:if="${tasksPage.number < tasksPage.totalPages - 1}">
            <a th:href="@{/home(page=${tasksPage.number + 1}, query=${query}, category=${category})}">Вперёд</a>
        </li>
    </ul>
</div>

<!-- Форма для отправки Email -->
<div class="container">
    <h2>Отправить письмо</h2>
    <form th:action="@{/home/send-email}" method="post">
        <div class="form-group">
            <label for="email">Email получателя:</label>
            <input type="email" id="email" name="email" required>
        </div>

        <div class="form-group">
            <label for="name">Ваше имя:</label>
            <input type="text" id="name" name="name" required>
        </div>

        <div class="form-group">
            <label for="message">Сообщение:</label>
            <textarea id="message" name="message" rows="5" required></textarea>
        </div>

        <div class="form-group">
            <button type="submit">Отправить</button>
        </div>
    </form>

    <div class="message" th:if="${successMessage != null}" style="color: green;">
        <p th:text="${successMessage}"></p>
    </div>
    <div class="message" th:if="${errorMessage != null}" style="color: red;">
        <p th:text="${errorMessage}"></p>
    </div>
</div>
</body>
</html>
